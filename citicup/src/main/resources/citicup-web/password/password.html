<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的消息</title>
    <link href="../lib/bootstrap-4.0.0-dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../components/top-nav.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../lib/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="password.css">
    <script src="../lib/jquery-3.3.1.js"></script>
    <script src="../lib/bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>
    <script src="../lib/layui/layui.js"></script>
</head>
<body>
<div class="top-nav"></div>
<div class="content-wrapper">
    <div class="content">
        <div class="password">
            <div class="passwordContent">
                <div id="sectionHeader">修改密码</div>
                <input class="passwordInput" placeholder="原密码" id="oldPassword" type="password">
                <input class="passwordInput" placeholder="新密码" id="newPassword" type="password">
                <input class="passwordInput" placeholder="确认新密码" id="confirmNewPassword" type="password">
                <button id="submitBtn" onclick="resetPassword()">提交</button>
            </div>
        </div>


        <div class="person_title">个人中心</div>
        <div class="person_board">
            <button class="accountManage">账户管理</button>
            <br/>
            <button class="accountPassword">登录密码</button>
            <br/>
            <button class="collectionbutton">我的收藏</button>
            <br/>
            <button class="messagebutton">我的消息</button>

            <div class="red_block"></div>
        </div>
    </div>
</div>
<div class="footer"></div>
</body>
<script src="../person/collection-top-nav.js"></script>


<script>
    $("button").css("outline","none");
    let layer;
    layui.use(['layer'],function(){
        layer = layui.layer;
    });
    var uid = window.localStorage.getItem("userId");
    function resetPassword() {
        if ($("#oldPassword").val() === '') {
            layer.msg("密码不能为空！");
            return;
        }
        if ($("#newPassword").val() === '') {
            layer.msg("密码不能为空！");
            return;
        }
        if ($("#confirmNewPassword").val() === '') {
            layer.msg("密码不能为空！");
            return;
        }
        $.post('/api/user/changePsw', {
            userId: uid,
            originPsw: $("#oldPassword").val(),
            newPsw: $("#newPassword").val()
        }).done(response => {
            console.log(response);
        }).fail(err => {
            layer.msg(err.responseText);
        })
    }
</script>
</html>